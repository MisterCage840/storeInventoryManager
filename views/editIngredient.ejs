<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Edit Ingredient</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>

  <body>
    <%- include("partials/nav", { links }) %>

    <h2>Edit Ingredient</h2>

    <form method="POST" action="/ingredients/<%= ingredient.id %>/edit">
      <label for="name">Name</label>
      <input id="name" name="name" value="<%= ingredient.name %>" required />

      <label for="qty">Quantity</label>
      <input
        id="qty"
        name="qty"
        type="number"
        step="0.01"
        min="0"
        value="<%= ingredient.qty %>"
        required
      />

      <label for="unit">Unit</label>
      <select id="unit" name="unit" required>
        <option value="kg" <%= ingredient.unit === "kg" ? "selected" : "" %>>kg</option>
        <option value="liters" <%= ingredient.unit === "liters" ? "selected" : "" %>>liters</option>
        <option value="pcs" <%= ingredient.unit === "pcs" ? "selected" : "" %>>pcs</option>
      </select>

      <label for="minStock">Minimum stock</label>
      <input
        id="minStock"
        name="minStock"
        type="number"
        step="0.01"
        min="0"
        value="<%= ingredient.min_stock %>"
        required
      />

      <label for="categoryId">Category</label>
      <select id="categoryId" name="categoryId" required>
        <% categories.forEach((c) => { %>
          <option
            value="<%= c.id %>"
            <%= Number(c.id) === Number(ingredient.category_id) ? "selected" : "" %>
          >
            <%= c.name %>
          </option>
        <% }) %>
      </select>

      <button type="submit">Save</button>
    </form>

    <p><a href="/ingredients/<%= ingredient.id %>">Cancel</a></p>
  </body>
</html>
